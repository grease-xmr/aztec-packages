// Contract that uses the autogenerated interface of the Test contract for calling its functions.
// Used for testing calling into other contracts via autogenerated interfaces.
use dep::aztec::macros::aztec;

#[aztec]
pub contract ImportTest {
    use dep::aztec::protocol_types::address::AztecAddress;

    use dep::test::Test;

    use dep::aztec::macros::functions::external;

    // Calls the get_this_address on the Test contract at the target address
    // Used for testing calling a function with no arguments
    // See yarn-project/end-to-end/src/e2e_nested_contract.test.ts
    #[external("private")]
    fn call_no_args(target: AztecAddress) -> AztecAddress {
        Test::at(target).get_this_address().call(self.context)
    }

    // Calls the emit_nullifier_public on the Test contract at the target address
    // Used for testing calling a public function
    // See yarn-project/end-to-end/src/e2e_nested_contract.test.ts
    #[external("private")]
    fn call_public_fn(target: AztecAddress) {
        Test::at(target).emit_nullifier_public(1).enqueue(self.context);
    }

    // Calls the emit_nullifier_public on the Test contract at the target address
    // Used for testing calling a public function from another public function
    // See yarn-project/end-to-end/src/e2e_nested_contract.test.ts
    #[external("public")]
    fn pub_call_public_fn(target: AztecAddress) {
        Test::at(target).emit_nullifier_public(1).call(self.context);
    }
}
